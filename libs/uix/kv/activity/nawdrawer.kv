# -*- coding: utf-8 -*-

#:kivy 1.9.1
#:import os os
#:import MDSeparator kivymd.card.MDSeparator

<ImageButton@ButtonBehavior+Image>:

<LabelSection@Label>:
    markup: True
    bold: True
    font_size: '16sp'
    color: app.text_color_from_hex
    size_hint_y: None
    height: dp(45)

<NavDrawer>:
    _app: app

    ImageButton:
        id: avatar
        source:
            'data/images/avatar.png' \
            if os.path.exists('%s/data/images/avatar.png' % app.directory) \
            else 'data/images/avatar_empty.png'
        size_hint: None, None
        size: dp(150), dp(150)
        pos_hint: {'center_x': .5}
        on_release: app.choice_avatar_user()

    Widget:

    LabelSection:
        id: user_name
        text: app.user_name

    ScrollView:
        size_hint_y: None
        height: app.window.size[1] // 1.8

        GridLayout:
            cols: 1
            size_hint_y: None
            height: self.minimum_height

            IconItemOne:
                icon: 'data/images/issues.png'
                text: app.translation._('Вопросы')
                events_callback:
                    lambda: root.show_posts()
            IconItemOne:
                icon: 'data/images/answer.png'
                text: app.translation._('Ответы')

            MDSeparator:

            LabelSection:
                text: 'Группа:'

            IconItemOne:
                icon: 'data/images/issues.png'
                id: issues_in_group
                text: app.translation._('Вопросов в группе - %s') % '0'
                events_callback:
                    lambda: root.show_posts(only_questions=False)
            IconItemOne:
                icon: 'data/images/new_issues.png'
                id: new_issues_in_group
                text: app.translation._('Новые - %s') % '0'
                events_callback:
                    lambda: root.show_posts(count_issues=self.text.split('- ')[1], only_questions=False)

            MDSeparator:

            LabelSection:
                text:  app.translation._('Настройки' + ':')

            IconItemOne:
                icon: 'data/images/settings.png'
                text: app.translation._('Настройки')
            IconItemOne:
                icon: 'data/images/plugins.png'
                text: app.translation._('Плагины')
                events_callback: app.show_plugins
            IconItemOne:
                icon: 'data/images/license.png'
                text: app.translation._('Лицензия')
                events_callback: app.show_license
            IconItemOne:
                icon: 'data/images/about.png'
                text: 'About'
                events_callback: app.show_about
            IconItemOne:
                icon: 'data/images/exit.png'
                text: app.translation._('Выход')
                events_callback: app.dialog_exit
